# CLAUDE.md

이 파일은 Claude Code (claude.ai/code)가 이 저장소에서 코드 작업을 할 때 참고할 가이드를 제공합니다.

## 프로젝트 개요

이 프로젝트는 Oracle Cloud Infrastructure(OCI)에서 서버리스 환경으로 배포되는 여행 포토로그 웹 애플리케이션입니다. 사용자가 짧은 텍스트 설명과 함께 사진을 업로드하고, EXIF 위치 데이터를 자동 추출하며, 썸네일을 생성하고, 대화형 지도에 여행 위치를 표시하는 기능을 제공합니다.

## 계획된 아키텍처

프로젝트 명세서(기획서.md)에 따라 애플리케이션은 다음과 같이 구성됩니다:

### 프론트엔드
- **프레임워크**: React 기반 웹 애플리케이션
- **사진 업로드**: 파일 선택 및 카메라 촬영 기능
- **EXIF 처리**: exifr 라이브러리를 사용한 클라이언트 측 EXIF 데이터 추출
- **지도 연동**: 위치 마커가 포함된 대화형 지도 표시
- **UI 컴포넌트**: 짧은 텍스트 입력 폼 및 사진 썸네일 표시

### 백엔드 (서버리스)
- **런타임**: Python 기반 OCI Functions
- **API Gateway**: 사진 업로드 및 메타데이터용 RESTful 엔드포인트
- **파일 저장소**: 사진 자산용 OCI Object Storage
- **썸네일 처리**: 자동 썸네일 생성 함수
- **데이터베이스**: OCI NoSQL DB 또는 호환 가능한 데이터베이스 서비스

### 인프라
- **클라우드 플랫폼**: Oracle Cloud Infrastructure (OCI)
- **인증**: OAuth 지원을 포함한 OCI IAM 연동
- **저장소**: 사진 및 썸네일용 Object Storage
- **데이터베이스**: 메타데이터 및 위치 정보용 NoSQL 데이터베이스

## 개발 단계

프로젝트는 체계적인 개발 방식을 따릅니다:

1. **요구사항 및 설계**: 기능 명세, 데이터베이스 스키마, API 설계, UI/UX 플로우
2. **프론트엔드 개발**: React 설정, 사진 업로드, EXIF 추출, 지도 연동
3. **서버리스 백엔드**: OCI Functions, API Gateway, Object Storage 연동
4. **데이터베이스 연동**: NoSQL 데이터베이스 설정, 메타데이터 저장 API
5. **보안 및 인증**: 사용자 인증, 개인정보 보호 규정 준수, 위치 권한
6. **테스트 및 배포**: 통합 테스트, CI/CD 자동화, 프로덕션 배포

## 주요 기능

- **사진 관리**: 업로드, 썸네일 생성, EXIF 데이터 추출, 단일/일괄 삭제
- **위치 서비스**: EXIF 데이터에서 자동 위치 감지
- **텍스트 통합**: 사진 업로드와 함께 짧은 텍스트 설명
- **지도 시각화**: 여행 위치의 대화형 표시
- **날짜 관리**: EXIF 촬영시간 우선, 없을 경우 사용자 입력 여행날짜 fallback
- **개인정보 보호 제어**: 위치 데이터에 대한 사용자 동의, 개인정보 보호 정책 준수

## 구현 완료 기능

### 사진 삭제 기능 (2024-09-18)
- **단일 삭제**: PhotoModal에서 개별 사진 삭제 (확인 다이얼로그 포함)
- **일괄 삭제**: HomePage에서 다중 선택을 통한 배치 삭제
- **완전 삭제**: NoSQL 메타데이터와 Object Storage 파일 모두 제거
- **UI/UX 개선**: iOS 스타일 헤더 레이아웃, 시각적 분리, 반응형 디자인

### EXIF 날짜 처리 개선 (2024-09-18)
- **메타데이터 날짜 지정**: EXIF 촬영시간이 없는 경우 사용자 입력 날짜 사용 가능
- **여행날짜 입력 UI**: MultiPhotoUpload에 선택적 날짜 입력 필드 추가
- **우선순위 로직**: EXIF 촬영시간 > 사용자 입력 여행날짜 > 업로드 시간 순서로 적용
- **스마트 fallback**: 촬영시간이 없는 사진에 자동으로 여행날짜(정오) 적용

## 개발 참고사항

- 애플리케이션은 명시적인 위치 동의를 통해 사용자 개인정보를 우선 보호합니다
- 더 나은 성능을 위해 EXIF 데이터 처리는 클라이언트 측에서 수행됩니다
- 서버리스 아키텍처는 확장성과 비용 효율성을 보장합니다
- UI 요소에 한국어 지원이 필요할 수 있습니다
- 위치 기반 기능은 개인정보 보호 규정을 신중하게 처리해야 합니다